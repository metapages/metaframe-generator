import{l as p,A as y,v as e,I as S,S as z,d as E,u as O,y as I,M as H,D as j,a as R,b as A,B as N,G as q,c as b,T as D,H as F,C as W,e as B,f as k,g as $,h as G,i as K,Q,j as T,k as U,r as x,F as L,m as J,n as V,W as X,o as Y}from"./vendor.cd20c398.js";const Z=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const t of r)if(t.type==="childList")for(const c of t.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function a(r){const t={};return r.integrity&&(t.integrity=r.integrity),r.referrerpolicy&&(t.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?t.credentials="include":r.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function s(r){if(r.ep)return;r.ep=!0;const t=a(r);fetch(r.href,t)}};Z();const _=(o,n)=>{const[a,s]=p(o);return I(()=>{let r=o.concat([]);o.forEach(t=>{t.type==="option"&&t.suboptions&&n&&Object.keys(n).forEach(c=>{const u=n[c];u&&t?.suboptions?.[u]&&(r=r.concat(t.suboptions[u]))})}),s(r)},[n,s,o]),[a]},ee=({options:o})=>{const[n,a]=p(!1),s=y(()=>{a(!n)},[n]);return e(E,null,e(S,{verticalAlign:"top","aria-label":"Metaframe settings",icon:e(z,null),size:"lg",onClick:s}),e(ne,{isOpen:n,setOpen:a,options:o}))},ne=({isOpen:o,setOpen:n,options:a})=>{const[s,r]=O("options",Object.fromEntries(a.filter(l=>l.default).map(l=>[l.name,l.default]))),[t,c]=p(s||{}),[u]=_(a,t),[M,h]=p(void 0),C=y(l=>{const{name:d,value:i}=l.target;let m=a.concat([]);a.forEach(w=>{w.suboptions&&Object.values(w.suboptions).forEach(P=>m=m.concat(P))});const f=m.find(w=>w.name===d);if(!f){console.error(`No option found for name=${d}`);return}f.type==="boolean"?c({...t,[d]:i==="1"}):c({...t,[d]:i})},[t,c,a]),g=y(()=>{n(!o)},[n,o]),v=y(()=>{const l={};if(Object.keys(t).forEach(i=>{const m=a.find(f=>f.name===i);if(m&&m.validator&&m.type!=="boolean"){const f=m.validator(t[i]);f&&(l[i]=f)}}),Object.keys(l).length>0){h(l);return}h(void 0);const d={};Object.keys(t).forEach(i=>{const m=u.find(f=>f.name===i);m?m.map?d[i]=m.map(t[i]):m.type==="boolean"?d[i]=t[i]===!0||t[i]==="1"||t[i]==="true":d[i]=t[i]:d[i]=t[i]}),n(!o),r(d)},[n,o,a,t,u,r,h]);return I(()=>{if(!o)return;const l=d=>{d.key==="Enter"&&o&&v()};return window.addEventListener("keyup",l),()=>{window.removeEventListener("keyup",l)}},[v,o]),e(k,{placement:"top",onClose:v,isOpen:o},e(H,null,e(j,null,e(R,{borderBottomWidth:"0px"},"Configure metaframe (stored in URL hash params )"),e(A,null,e(N,{maxW:"80%",p:2,borderWidth:"4px",borderRadius:"lg",overflow:"hidden"},e(q,{templateColumns:"repeat(12, 1fr)",gap:6},u.map(l=>e(E,null,e(b,{rowSpan:1,colSpan:4},e(N,{w:"100%",h:"100%",display:"flex",alignItems:"center",justifyContent:"flex-end"},e(D,{textAlign:"right",verticalAlign:"bottom"},l.displayName||l.name,":"))),e(b,{rowSpan:1,colSpan:8}," ",te(l,t[l.name],C)))),e(b,{rowSpan:1,colSpan:12}),e(b,{rowSpan:1,colSpan:12}),e(b,{rowSpan:1,colSpan:12}),e(b,{rowSpan:1,colSpan:10}),e(b,{rowSpan:0,colSpan:2},e(F,{spacing:2,justify:"flex-end",direction:"row"},e(S,{size:"lg",color:"red",icon:e(W,null),onClick:g}),e(S,{size:"lg",color:"green",icon:e(B,null),onClick:v})))))))))},te=(o,n,a)=>{switch(o.type){case"option":return e(K,{name:o.name,value:n,onChange:a,placeholder:"Select option"},o.options.map(s=>e("option",{value:s},s)));case"boolean":return e(G,{name:o.name,rightIcon:e(B,null),onChange:a,isChecked:n===!0||n==="1",value:n?0:1});default:return e(N,{w:"100%",h:"10"},e($,{name:o.name,type:"text",placeholder:"",value:n,onInput:a}))}},oe=({url:o})=>{const[n,a]=p(!1);o=o||`${window.location.origin}${window.location.pathname}/README.md`;const s=y(()=>{a(!n)},[n]);return e(E,null,e(S,{verticalAlign:"top","aria-label":"Help",icon:e(Q,null),size:"lg",onClick:s,mr:"4"}),e(ae,{url:o,isOpen:n,setOpen:a}))},ae=({isOpen:o,setOpen:n,url:a})=>{const s=y(()=>{n(!o)},[n,o]),r=y(()=>{n(!1)},[n]),t=`https://metapages.github.io/metaframe-markdown/#?url=${a}`;return e(k,{size:"full",placement:"top",onClose:s,isOpen:o,onOverlayClick:r},e(H,null,e(j,null,e(T,{size:"lg",bg:"gray.100"}),e(A,null,e("iframe",{width:"100%",height:"100%",src:t})))))},re=[{name:"frequency",displayName:"Frequency (per second)",default:1,type:"number"},{name:"distribution",displayName:"Random distribution",default:"uniform",type:"option",options:["uniform","uniformInt","normal"],suboptions:{uniform:[{name:"min",displayName:"Min",default:0,type:"number"},{name:"max",displayName:"Max",default:1,type:"number"}],uniformInt:[{name:"min",displayName:"Min",default:0,type:"number"},{name:"max",displayName:"Max",default:10,type:"number"}],uniformBoolean:[],normal:[{name:"mu",displayName:"mu",default:0,type:"number"},{name:"sigma",displayName:"sigma",default:1,type:"number"}]}}],se=()=>{const o=U(),[n]=O("options"),[a,s]=p({f:1,rand:x.uniform(0,1)}),[r,t]=p(0);return I(()=>{if(!n)return;let c="uniform";const u=n.min!==void 0?n.min:0,M=n.max!==void 0?n.max:1,h=n.mu!==void 0?n.mu:0,C=n.sigma!==void 0?n.sigma:1,g=n.frequency!==void 0?n.frequency:1;switch(n.distribution&&(c=n.distribution),c){case"uniform":s({f:g,rand:x.uniform(u,M)});break;case"uniformInt":s({f:g,rand:x.uniformInt(Math.floor(u),Math.floor(M))});break;case"normal":s({f:g,rand:x.normal(h,C)});break}},[n]),I(()=>{if(!o)return;const c=setInterval(()=>{const u=a.rand();o.metaframe?.setOutput("v",u),t(u)},1e3/a.f);return()=>{clearInterval(c)}},[o,a]),e("div",null,r)},le=()=>e(L,null,e(L,{flexDirection:"column"},e(se,null)),e(J,null),e(oe,null),e(ee,{options:re})),ie=()=>e(le,null);V(e(Y,null,e(X,null,e(ie,null))),document.getElementById("root"));
//# sourceMappingURL=index.60be1146.js.map
