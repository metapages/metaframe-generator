import{l as b,A as y,v as e,I as w,S as D,d as E,u as O,y as S,M as H,D as j,a as F,b as A,B as N,G as k,c as h,T as q,H as R,C as W,e as B,f as L,g as $,h as G,i as K,Q,j as T,k as U,r as I,F as P,m as J,n as V,W as X,o as Y}from"./vendor.cd20c398.js";const Z=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const t of r)if(t.type==="childList")for(const c of t.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function a(r){const t={};return r.integrity&&(t.integrity=r.integrity),r.referrerpolicy&&(t.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?t.credentials="include":r.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function l(r){if(r.ep)return;r.ep=!0;const t=a(r);fetch(r.href,t)}};Z();const _=(o,n)=>{const[a,l]=b(o);return S(()=>{let r=o.concat([]);o.forEach(t=>{t.type==="option"&&t.suboptions&&n&&Object.keys(n).forEach(c=>{const m=n[c];m&&t?.suboptions?.[m]&&(r=r.concat(t.suboptions[m]))})}),l(r)},[n,l,o]),[a]},ee=({options:o})=>{const[n,a]=b(!1),l=y(()=>{a(!n)},[n]);return e(E,null,e(w,{verticalAlign:"top","aria-label":"Metaframe settings",icon:e(D,null),size:"lg",onClick:l}),e(ne,{isOpen:n,setOpen:a,options:o}))},ne=({isOpen:o,setOpen:n,options:a})=>{const[l,r]=O("options",Object.fromEntries(a.filter(i=>i.default).map(i=>[i.name,i.default]))),[t,c]=b(l||{}),[m]=_(a,t),[x,g]=b(void 0),M=y(i=>{const{name:d,value:s}=i.target;let u=a.concat([]);a.forEach(v=>{v.suboptions&&Object.values(v.suboptions).forEach(z=>u=u.concat(z))});const p=u.find(v=>v.name===d);if(!p){console.error(`No option found for name=${d}`);return}p.type==="boolean"?c({...t,[d]:s==="1"}):c({...t,[d]:s})},[t,c,a]),C=y(()=>{n(!o)},[n,o]),f=y(()=>{const i={};if(Object.keys(t).forEach(s=>{const u=a.find(p=>p.name===s);if(u&&u.validator&&u.type!=="boolean"){const p=u.validator(t[s]);p&&(i[s]=p)}}),Object.keys(i).length>0){g(i);return}g(void 0);const d={};Object.keys(t).forEach(s=>{const u=m.find(p=>p.name===s);t[s]!==void 0&&(u!==void 0?u.map?d[s]=u.map(t[s]):u.type==="boolean"?d[s]=t[s]===!0||t[s]==="1"||t[s]==="true":u.type==="number"?d[s]=typeof t[s]=="string"?parseFloat(t[s]):t[s]:d[s]=t[s]:d[s]=t[s])}),n(!o),r(d)},[n,o,a,t,m,r,g]);return S(()=>{if(!o)return;const i=d=>{d.key==="Enter"&&o&&f()};return window.addEventListener("keyup",i),()=>{window.removeEventListener("keyup",i)}},[f,o]),e(L,{placement:"top",onClose:f,isOpen:o},e(H,null,e(j,null,e(F,{borderBottomWidth:"0px"},"Configure metaframe (stored in URL hash params )"),e(A,null,e(N,{maxW:"80%",p:2,borderWidth:"4px",borderRadius:"lg",overflow:"hidden"},e(k,{templateColumns:"repeat(12, 1fr)",gap:6},m.map(i=>e(E,null,e(h,{rowSpan:1,colSpan:4},e(N,{w:"100%",h:"100%",display:"flex",alignItems:"center",justifyContent:"flex-end"},e(q,{textAlign:"right",verticalAlign:"bottom"},i.displayName||i.name,":"))),e(h,{rowSpan:1,colSpan:8}," ",te(i,t[i.name],M)))),e(h,{rowSpan:1,colSpan:12}),e(h,{rowSpan:1,colSpan:12}),e(h,{rowSpan:1,colSpan:12}),e(h,{rowSpan:1,colSpan:10}),e(h,{rowSpan:0,colSpan:2},e(R,{spacing:2,justify:"flex-end",direction:"row"},e(w,{size:"lg",color:"red",icon:e(W,null),onClick:C}),e(w,{size:"lg",color:"green",icon:e(B,null),onClick:f})))))))))},te=(o,n,a)=>{switch(o.type){case"option":return e(K,{name:o.name,value:n,onChange:a,placeholder:"Select option"},o.options.map(l=>e("option",{value:l},l)));case"boolean":return e(G,{name:o.name,rightIcon:e(B,null),onChange:a,isChecked:n===!0||n==="1",value:n?0:1});default:return e(N,{w:"100%",h:"10"},e($,{name:o.name,type:"text",placeholder:"",value:n,onInput:a}))}},oe=({url:o})=>{const[n,a]=b(!1);o=o||`${window.location.origin}${window.location.pathname}/README.md`;const l=y(()=>{a(!n)},[n]);return e(E,null,e(w,{verticalAlign:"top","aria-label":"Help",icon:e(Q,null),size:"lg",onClick:l,mr:"4"}),e(ae,{url:o,isOpen:n,setOpen:a}))},ae=({isOpen:o,setOpen:n,url:a})=>{const l=y(()=>{n(!o)},[n,o]),r=y(()=>{n(!1)},[n]),t=`https://metapages.github.io/metaframe-markdown/#?url=${a}`;return e(L,{size:"full",placement:"top",onClose:l,isOpen:o,onOverlayClick:r},e(H,null,e(j,null,e(T,{size:"lg",bg:"gray.100"}),e(A,null,e("iframe",{width:"100%",height:"100%",src:t})))))},re=[{name:"frequency",displayName:"Frequency (per second)",default:1,type:"number"},{name:"distribution",displayName:"Distribution",default:"uniform",type:"option",options:["uniform","uniformInt","normal","sin"],suboptions:{uniform:[{name:"min",displayName:"Min",default:0,type:"number"},{name:"max",displayName:"Max",default:1,type:"number"}],uniformInt:[{name:"min",displayName:"Min",default:0,type:"number"},{name:"max",displayName:"Max",default:10,type:"number"}],uniformBoolean:[],normal:[{name:"mu",displayName:"mu",default:0,type:"number"},{name:"sigma",displayName:"sigma",default:1,type:"number"}],sin:[{name:"increment",displayName:"increment",default:.01,type:"number"}]}}],se=()=>{const o=U(),[n]=O("options"),[a,l]=b({f:1,rand:I.uniform(0,1)}),[r,t]=b(0);return S(()=>{if(!n)return;let c="uniform";const m=n.min!==void 0?n.min:0,x=n.max!==void 0?n.max:1,g=n.mu!==void 0?n.mu:0,M=n.sigma!==void 0?n.sigma:1,C=n.increment!==void 0?n.increment:.01,f=n.frequency!==void 0?n.frequency:1;switch(n.distribution&&(c=n.distribution),c){case"uniform":l({f,rand:I.uniform(m,x)});break;case"uniformInt":l({f,rand:I.uniformInt(Math.floor(m),Math.floor(x))});break;case"normal":l({f,rand:I.normal(g,M)});break;case"sin":let i=.01;l({f,rand:()=>(i+=C,Math.sin(i))});break}},[n]),S(()=>{if(!o)return;const c=setInterval(()=>{const m=a.rand();o.metaframe?.setOutput("v",m),t(m)},1e3/a.f);return()=>{clearInterval(c)}},[o,a]),e("div",null,r)},le=()=>e(P,null,e(P,{flexDirection:"column"},e(se,null)),e(J,null),e(oe,null),e(ee,{options:re})),ie=()=>e(le,null);V(e(Y,null,e(X,null,e(ie,null))),document.getElementById("root"));
//# sourceMappingURL=index.125770bf.js.map
